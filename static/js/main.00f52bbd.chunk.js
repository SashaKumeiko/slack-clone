(this["webpackJsonpslack-clone"]=this["webpackJsonpslack-clone"]||[]).push([[0],{64:function(e,a,t){e.exports=t(98)},69:function(e,a,t){},70:function(e,a,t){},75:function(e,a,t){},92:function(e,a,t){},93:function(e,a,t){},94:function(e,a,t){},95:function(e,a,t){},96:function(e,a,t){},97:function(e,a,t){},98:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(23),r=t.n(c),o=(t(69),t(12)),s=t(115),i=t(46),m=t.n(i),u=t(47),d=t.n(u),E=t(48),h=t.n(E),p=(t(70),Object(n.createContext)()),f=function(e){var a=e.reducer,t=e.initialState,c=e.children;return l.a.createElement(p.Provider,{value:Object(n.useReducer)(a,t)},c)},v=function(){return Object(n.useContext)(p)},g=function(){var e=v(),a=Object(o.a)(e,1)[0].user;return l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"header__left"},l.a.createElement(s.a,{className:"header__avatar",alt:null===a||void 0===a?void 0:a.displayName,src:a.photoURL}),l.a.createElement(m.a,null)),l.a.createElement("div",{className:"header__search"},l.a.createElement(d.a,null),l.a.createElement("input",{type:"text",placeholder:"search"})),l.a.createElement("div",{className:"header__right"}),l.a.createElement(h.a,null))},b=t(49),_=t.n(b),N=t(50),S=t.n(N),I=(t(75),t(3)),O=t(25),j=t.n(O),w=j.a.initializeApp({apiKey:"AIzaSyAYykpZEzaoeTIWEp6MvJjrZqgdl6WBgrE",authDomain:"slackclone-9efd0.firebaseapp.com",databaseURL:"https://slackclone-9efd0.firebaseio.com",projectId:"slackclone-9efd0",storageBucket:"slackclone-9efd0.appspot.com",messagingSenderId:"997157361776",appId:"1:997157361776:web:6f07f4a595744f19c23cb5",measurementId:"G-CVBQ9Y9BS8"}).firestore(),k=j.a.auth(),y=new j.a.auth.GoogleAuthProvider,C=w,T=function(e){var a=e.Icon,t=e.title,n=e.id,c=e.addChannelOption,r=Object(I.f)();return l.a.createElement("div",{className:"sidebarOption",onClick:c?function(){var e=prompt("please enter channel name");e&&C.collection("rooms").add({name:e})}:function(){n?r.push("/room/:".concat(n)):r.push(t)}},a&&l.a.createElement(a,{className:"sidebarOption__icon"}),a?l.a.createElement("h3",null," ",t," "):l.a.createElement("h3",{className:"sidebarOption__channel"},l.a.createElement("span",{className:"sidebarOption__hash"}," # "),t))},R=t(52),B=t.n(R),U=t(51),A=t.n(U),W=t(53),D=t.n(W),L=t(54),x=t.n(L),P=t(55),z=t.n(P),F=t(56),G=t.n(F),J=t(57),M=t.n(J),V=t(34),Y=t.n(V),Z=t(58),q=t.n(Z),K=(t(92),function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],c=a[1],r=v(),s=Object(o.a)(r,1)[0].user;return Object(n.useEffect)((function(){C.collection("rooms").onSnapshot((function(e){c(e.docs.map((function(e){return{id:e.id,name:e.data().name}})))}))}),[]),l.a.createElement("div",{className:"sidebar"},l.a.createElement("div",{className:"sidebar__header"},l.a.createElement("div",{className:"sidebar__info"},l.a.createElement("h2",null,"Slack Clone"),l.a.createElement("h3",null,l.a.createElement(_.a,null),null===s||void 0===s?void 0:s.displayName)),l.a.createElement(S.a,null)),l.a.createElement(T,{Icon:A.a,title:"Threads"}),l.a.createElement(T,{title:"Mentions & reactions",Icon:B.a}),l.a.createElement(T,{Icon:D.a,title:"Saved items"}),l.a.createElement(T,{Icon:x.a,title:"Channel browser"}),l.a.createElement(T,{Icon:z.a,title:"People & user groups"}),l.a.createElement(T,{Icon:G.a,title:"Apps"}),l.a.createElement(T,{Icon:M.a,title:"File browser"}),l.a.createElement(T,{Icon:Y.a,title:"Show less"}),l.a.createElement("hr",null),l.a.createElement(T,{Icon:Y.a,title:"Channels"}),l.a.createElement("hr",null),l.a.createElement(T,{Icon:q.a,addChannelOption:!0,title:"Add channel"}),t.map((function(e){return l.a.createElement(T,{title:e.name,id:e.id})})))}),Q=t(31),$=(t(93),t(94),t(59)),H=t.n($),X=t(60),ee=t.n(X),ae=(t(95),function(e){var a=e.message,t=e.timestamp,n=e.user,c=e.userImage;return l.a.createElement("div",{className:"message"},l.a.createElement("img",{src:c,alt:""}),l.a.createElement("div",{className:"message__info"},l.a.createElement("h4",null,n," ",l.a.createElement("span",{className:"message__timestamp"},new Date(null===t||void 0===t?void 0:t.toDate()).toUTCString()),"  "),l.a.createElement("p",null,a)))}),te=(t(96),function(e){var a=e.channelName,t=e.channelId,c=Object(n.useState)(""),r=Object(o.a)(c,2),s=r[0],i=r[1],m=v(),u=Object(o.a)(m,1)[0].user;return console.log(a),l.a.createElement("div",{className:"chatInput"},l.a.createElement("form",null,l.a.createElement("input",{placeholder:"input message",value:s,onChange:function(e){return i(e.target.value)}}),l.a.createElement("button",{onClick:function(e){e.preventDefault(),t&&C.collection("rooms").doc(t).collection("messages").add({message:s,timestamp:j.a.firestore.FieldValue.serverTimestamp(),user:u.displayName,userImage:u.photoURL}),i("")}},"SEND")))}),ne=function(){var e=Object(I.g)().roomId;e=e.substring(1);var a=Object(n.useState)(null),t=Object(o.a)(a,2),c=t[0],r=t[1],s=Object(n.useState)([]),i=Object(o.a)(s,2),m=i[0],u=i[1];return console.log(c),Object(n.useEffect)((function(){e&&(C.collection("rooms").doc(e).onSnapshot((function(e){console.log(e.data()),r(e.data())})),C.collection("rooms").doc(e).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){u(e.docs.map((function(e){return e.data()})))})))}),[e]),console.log(m),l.a.createElement("div",{className:"chat"},l.a.createElement("div",{className:"chat__header"},l.a.createElement("div",{className:"chat__headerLeft"},l.a.createElement("h4",{className:"chat__channelName"},l.a.createElement("strong",null,"#",null===c||void 0===c?void 0:c.name),l.a.createElement(H.a,null))),l.a.createElement("div",{className:"chat__headerRight"},l.a.createElement("p",null,l.a.createElement(ee.a,null),"details"))),l.a.createElement("div",{className:"chat__messages"},m.map((function(e){var a=e.user,t=e.message,n=e.timestamp,c=e.userImage;return l.a.createElement(ae,{user:a,message:t,userImage:c,timestamp:n})}))),l.a.createElement(te,{clannelName:null===c||void 0===c?void 0:c.name,channelId:e}))},le=(t(97),t(114)),ce=t(37),re=function(e,a){switch(a.type){case"SET_USER":return Object(ce.a)(Object(ce.a)({},e),{},{user:a.user});default:return e}},oe=function(){var e=v(),a=Object(o.a)(e,2),t=(a[0],a[1]);console.log("SET_USER");return l.a.createElement("div",{className:"login"},l.a.createElement("div",{className:"login__container"},l.a.createElement("img",{src:"https://www.logo.wine/a/logo/Slack_Technologies/Slack_Technologies-Logo.wine.svg",alt:""}),l.a.createElement("h1",null,"Sign in to Slack-clone"),l.a.createElement(le.a,{onClick:function(){k.signInWithPopup(y).then((function(e){console.log(e),t({type:"SET_USER",user:e.user})})).catch((function(e){return alert(e.message)}))}},"Sign in with Google")))};var se=function(){var e=v(),a=Object(o.a)(e,1)[0].user;return console.log(a),l.a.createElement("div",{className:"app"},l.a.createElement(Q.a,null,a?l.a.createElement(l.a.Fragment,null,l.a.createElement(g,null),l.a.createElement("div",{className:"app__body"},l.a.createElement(K,null),l.a.createElement(I.c,null,l.a.createElement(I.a,{path:"/room/:roomId"},l.a.createElement(ne,null)),l.a.createElement(I.a,{path:"/"},l.a.createElement("h1",null,"Welcome"))))):l.a.createElement(oe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(f,{initialState:{user:null},reducer:re},l.a.createElement(se,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.00f52bbd.chunk.js.map